<!-- Fondo oscuro -->
<div (click)="onBackgroundClick($event)" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
    <!-- Caja del modal -->
    <div (click)="$event.stopPropagation()" class="bg-white p-6 rounded-2xl w-full max-w-md shadow-lg relative">
  
      <!-- Título -->
      <h2 class="text-xl font-bold text-center mb-4">
        {{ isLogin ? 'Iniciar sesión' : 'Registrarse' }}
        @if (errorMessage) {
          <div class="bg-red-100 text-red-700 p-2 rounded mb-4 text-sm">
            {{ errorMessage }}
          </div>
        }        
      </h2>
  
      <!-- Formulario LOGIN -->
      <form *ngIf="isLogin; else registerForm" (ngSubmit)="onLogin()" #loginForm="ngForm">
        <div class="mb-4">
          <label class="block text-sm font-medium mb-1">Email</label>
          <input type="email" [(ngModel)]="loginData.email" name="email" required
                 class="w-full border px-3 py-2 rounded-md" />
        </div>
        <div class="mb-4">
          <label class="block text-sm font-medium mb-1">Contraseña</label>
          <input type="password" [(ngModel)]="loginData.password" name="password" required
                 class="w-full border px-3 py-2 rounded-md" />
        </div>
        <button type="submit"
                class="w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-500 transition">
          Entrar
        </button>
      </form>
  
      <!-- Formulario REGISTER -->
      <ng-template #registerForm>
        <form (ngSubmit)="onRegister()" #registerForm="ngForm">
          <div class="mb-4">
            <label class="block text-sm font-medium mb-1">Nombre</label>
            <input type="text" [(ngModel)]="registerData.name" name="name" required
                   class="w-full border px-3 py-2 rounded-md" />
          </div>
          <div class="mb-4">
            <label class="block text-sm font-medium mb-1">Email</label>
            <input type="email" [(ngModel)]="registerData.email" name="email" required
                   class="w-full border px-3 py-2 rounded-md" />
          </div>
          <div class="mb-4">
            <label class="block text-sm font-medium mb-1">Contraseña</label>
            <input type="password" [(ngModel)]="registerData.password" name="password" required
                   class="w-full border px-3 py-2 rounded-md" />
          </div>
          <div class="mb-4">
            <label class="block text-sm font-medium mb-1">Confirmar contraseña</label>
            <input type="password" [(ngModel)]="registerData.password_confirmation"
                   name="password_confirmation" required
                   class="w-full border px-3 py-2 rounded-md" />
          </div>
          <button type="submit"
                  class="w-full bg-green-600 text-white py-2 rounded hover:bg-green-500 transition">
            Registrarse
          </button>
        </form>
      </ng-template>
  
      <!-- Cambiar entre login y registro -->
      <p class="text-sm text-center mt-4">
        {{ isLogin ? '¿No tienes cuenta?' : '¿Ya tienes cuenta?' }}
        <button (click)="toggleLoginRegister()" class="text-blue-600 underline ml-1">
          {{ isLogin ? 'Regístrate' : 'Inicia sesión' }}
        </button>
        
      </p>
  
      <!-- Botón cerrar modal -->
      <button (click)="closeModal()" class="absolute top-2 right-2 text-gray-500 hover:text-black">
        ✖
      </button>
    </div>
  </div>
  