<header class="header-bar flex items-center justify-between p-4 shadow-md relative">
  <!-- Navbar -->
  <div class="flex items-center gap-4" (click)="onBackgroundClick($event)">

    <div class="flex items-center gap-4">
      <!-- Logo -->
      <div class="logo-title text-xl font-bold mr-6">
        <a routerLink="/" (click)="$event.stopPropagation()">ðŸŽ® GameRatings</a>
      </div>

      <!-- Juegos y filtros -->
      <div class="relative group">
        <!-- BotÃ³n para abrir/cerrar menÃº -->
        <div class="relative">
          <button (click)="goToGamesAndToggleFilters()" class="nav-btn">
            ðŸŽ® Juegos â–¾
          </button>
        </div>
      </div>

      <!-- Noticias -->
      <a routerLink="/news" class="nav-btn">Noticias</a>

      <!-- Encuestas -->
      <button (click)="goToPolls()" class="nav-btn">Encuestas</button>

      <!-- BotÃ³n IA -->
      <button disabled class="nav-btn disabled-btn">
        ðŸ¤– IA Recomienda (prÃ³ximamente)
      </button>
    </div>

    <div class="flex items-center gap-4 ml-auto">
      <select (change)="changeLang($event)" [value]="currentLang">
        <option value="es">EspaÃ±ol</option>
        <option value="en">English</option>
      </select>



      <!-- Login / Perfil -->
      @if (!isLoggedIn) {
      <button (click)="openAuthModal()" class="login-btn">Login</button>
      } @else {
      <button (click)="toggleMenu(); $event.stopPropagation()" class="profile-btn relative">
        Perfil
      </button>

      @if (menuOpen) {
      <div (click)="$event.stopPropagation()" class="profile-menu">
        <button (click)="goToProfile()" class="menu-item">Mi Perfil</button>
        <button (click)="logout()" class="menu-item logout">Cerrar SesiÃ³n</button>
      </div>
      }
      }
    </div>

  </div>
</header>

@if (isGamesPage) {
<div class="filters-wrapper" [class.visible]="showFilters">
  <div class="filters-dropdown">
    <div class="flex flex-row gap-2 flex-wrap">
      <!-- Filtros -->
      <select [(ngModel)]="category" (change)="onFilterChange()" class="filter-select">
        <option value="">CategorÃ­a</option>
        @for (cat of categories; track cat) {
        <option [value]="cat">{{ cat }}</option>
        }
      </select>

      <select [(ngModel)]="year" (change)="onFilterChange()" class="filter-select">
        <option value="">AÃ±o</option>
        @for (year of years; track year) {
        <option [value]="year">{{ year }}</option>
        }
      </select>

      <div class="score-range text-sm text-white w-full max-w-xs">
        <label class="mb-1 block">PuntuaciÃ³n</label>
        <div class="flex items-center gap-2">
          <span class="w-10 text-right">{{ scoreMin }}</span>
          <input type="range" min="0" max="100" step="1" [(ngModel)]="scoreMin" (change)="onFilterChange()"
            class="score-slider" />
          <input type="range" min="0" max="100" step="1" [(ngModel)]="scoreMax" (change)="onFilterChange()"
            class="score-slider" />
          <span class="w-10 text-left">{{ scoreMax }}</span>
        </div>
      </div>

      <select [(ngModel)]="platform" (change)="onFilterChange()" class="filter-select">
        <option value="">Plataforma</option>
        @for (plat of platforms; track plat) {
        <option [value]="plat">{{ plat }}</option>
        }
      </select>

      <input type="text" [(ngModel)]="search" (input)="onFilterChange()" placeholder="Buscar juegos..."
        class="filter-search" />

      <button (click)="clearFilters()" class="clear-btn">
        Limpiar filtros
      </button>
    </div>
  </div>
</div>
}