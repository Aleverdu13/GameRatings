<header class="header-bar flex items-center justify-between p-4 shadow-md relative">
  <!-- Navbar -->
  <div class="flex items-center gap-4" (click)="onBackgroundClick($event)">
    
    <!-- Logo -->
    <div class="logo-title text-xl font-bold mr-6">
      <a routerLink="/" (click)="$event.stopPropagation()">üéÆ GameRatings</a>
    </div>

    <!-- Juegos y filtros -->
    <div class="relative group">
      <button (click)="goToGames()" class="nav-btn">
        Juegos &nbsp; ‚ñæ
      </button>

      @if (isGamesPage) {
        <div class="filters-dropdown group-hover:visible">
          <div class="flex flex-row gap-2 flex-wrap">
            <select [(ngModel)]="category" (change)="onFilterChange()" class="filter-select">
              <option value="">Categor√≠a</option>
              @for (cat of categories; track cat) {
                <option [value]="cat">{{ cat }}</option>
              }
            </select>

            <select [(ngModel)]="year" (change)="onFilterChange()" class="filter-select">
              <option value="">A√±o</option>
              @for (year of years; track year) {
                <option [value]="year">{{ year }}</option>
              }
            </select>

            <div class="score-range text-sm text-white w-full max-w-xs">
              <label class="mb-1 block">Puntuaci√≥n</label>
              <div class="flex items-center gap-2">
                <span class="w-10 text-right">{{ scoreMin }}</span>
                <input type="range" min="0" max="100" step="1"
                  [(ngModel)]="scoreMin" (change)="onFilterChange()"
                  class="score-slider" />
                <input type="range" min="0" max="100" step="1"
                  [(ngModel)]="scoreMax" (change)="onFilterChange()"
                  class="score-slider" />
                <span class="w-10 text-left">{{ scoreMax }}</span>
              </div>
            </div>

            <select [(ngModel)]="platform" (change)="onFilterChange()" class="filter-select">
              <option value="">Plataforma</option>
              @for (plat of platforms; track plat) {
                <option [value]="plat">{{ plat }}</option>
              }
            </select>

            <input type="text" [(ngModel)]="search" (input)="onFilterChange()"
              placeholder="Buscar juegos..." class="filter-search" />

            <button (click)="clearFilters()" class="clear-btn">
              Limpiar filtros
            </button>
          </div>
        </div>
      }
    </div>

    <!-- Noticias -->
    <a routerLink="/news" class="nav-btn">Noticias</a>

    <!-- Encuestas -->
    <button (click)="goToPolls()" class="nav-btn">Encuestas</button>

    <!-- Bot√≥n IA -->
    <button disabled class="nav-btn disabled-btn">
      ü§ñ IA Recomienda (pr√≥ximamente)
    </button>

    <select (change)="changeLang($event)" [value]="currentLang">
      <option value="en">English</option>
      <option value="es">Espa√±ol</option>
    </select>



    <!-- Login / Perfil -->
    @if (!isLoggedIn) {
      <button (click)="openAuthModal()" class="login-btn">Login</button>
    } @else {
      <button (click)="toggleMenu(); $event.stopPropagation()" class="profile-btn relative">
        Perfil
      </button>

      @if (menuOpen) {
        <div (click)="$event.stopPropagation()" class="profile-menu">
          <button (click)="goToProfile()" class="menu-item">Mi Perfil</button>
          <button (click)="logout()" class="menu-item logout">Cerrar Sesi√≥n</button>
        </div>
      }
    }
  </div>
</header>
